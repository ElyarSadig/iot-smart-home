{% extends "base.html" %} {% block title %}Room Climate Dashboard{% endblock %}
{% block content %}
<div
  class="w-full max-w-6xl px-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"
>
  {% for room in rooms %}
  <div
    class="bg-white bg-opacity-90 backdrop-blur border border-blue-100 rounded-xl p-4 shadow hover:shadow-lg transition duration-300"
  >
    <div class="flex justify-between items-center mb-2">
      <h3 class="text-lg font-semibold text-indigo-700">Room {{ room.id }}</h3>
      <a
        href="/room/{{ room.id }}"
        class="text-sm text-blue-600 hover:underline"
        >Details</a
      >
    </div>

    <ul class="text-sm text-gray-800 space-y-1">
      <li><strong>🌡 Temp:</strong> {{ room.sensor.Temp }}°C</li>
      <li><strong>💧 Humidity:</strong> {{ room.sensor.RelH }}%</li>
      <li><strong>👥 Occupants:</strong> {{ room.sensor.Occ }}</li>
      <li>
        <strong>🔄 Activity:</strong>
        {% if room.sensor.Act == 1 %}📖 Reading {% elif room.sensor.Act == 2
        %}🧍 Standing {% elif room.sensor.Act == 3 %}🚶 Walking {% elif
        room.sensor.Act == 4 %}💻 Working {% else %}❓ N/A {% endif %}
      </li>
      <li>
        <strong>🚪 Door:</strong>
        {% if room.sensor.Door == 0 %}<span class="text-green-600">Closed</span>
        {% else %}<span class="text-red-600">Open</span>{% endif %}
      </li>
      <li>
        <strong>🪟 Window:</strong>
        {% if room.sensor.Win == 1 %}<span class="text-green-600">Closed</span>
        {% else %}<span class="text-red-600">Open</span>{% endif %}
      </li>
    </ul>

    <div class="mt-3 text-sm">
      <strong class="text-gray-600">Predicted:</strong>
      <span class="font-semibold text-blue-700 ml-1">
        {{ room.sensor.Temp + 0.3 * room.sensor.Occ - 0.2 * room.sensor.Door |
        round(1) }}°C
      </span>
    </div>

    <div class="mt-1 text-sm">
      <strong class="text-gray-600">Comfort:</strong>
      <span class="font-semibold text-green-700 ml-1">
        {{ room.preference }}°C
      </span>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
